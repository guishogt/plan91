<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTMX Demo - Plan 91</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
    <div class="min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-12">
        <div class="max-w-5xl mx-auto px-4">

            <!-- Header -->
            <div class="text-center mb-12">
                <h1 class="text-gradient mb-2">HTMX Demo</h1>
                <p class="text-gray-600">Interactive examples of HTMX with Plan 91</p>
            </div>

            <!-- Demo Grid -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">

                <!-- 1. Basic GET Request -->
                <div class="card">
                    <div class="card-header">
                        <h2>1. Basic GET Request</h2>
                        <p class="text-sm text-gray-600 mt-1">Click to load content dynamically</p>
                    </div>
                    <button hx-get="/demo/message"
                            hx-target="#result-1"
                            hx-swap="innerHTML"
                            class="btn-primary w-full mb-4">
                        Load Message
                    </button>
                    <div id="result-1" class="min-h-[60px]">
                        <!-- Response will appear here -->
                    </div>
                </div>

                <!-- 2. Current Time (Repeated Requests) -->
                <div class="card">
                    <div class="card-header">
                        <h2>2. Dynamic Content</h2>
                        <p class="text-sm text-gray-600 mt-1">Click repeatedly to see updates</p>
                    </div>
                    <button hx-get="/demo/time"
                            hx-target="#result-2"
                            hx-swap="innerHTML"
                            class="btn-secondary w-full mb-4">
                        Get Server Time
                    </button>
                    <div id="result-2" class="min-h-[60px] flex items-center justify-center">
                        <p class="text-gray-400 text-sm">Click button to load time</p>
                    </div>
                </div>

                <!-- 3. Form Submission -->
                <div class="card">
                    <div class="card-header">
                        <h2>3. Form Submission</h2>
                        <p class="text-sm text-gray-600 mt-1">Submit without page reload</p>
                    </div>
                    <form hx-post="/demo/submit"
                          hx-target="#result-3"
                          hx-swap="innerHTML">
                        <input type="text"
                               name="name"
                               placeholder="Enter your name"
                               class="form-input mb-3">
                        <button type="submit" class="btn-primary w-full">
                            Submit Form
                        </button>
                    </form>
                    <div id="result-3" class="mt-4 min-h-[60px]">
                        <!-- Form response will appear here -->
                    </div>
                </div>

                <!-- 4. Loading States -->
                <div class="card">
                    <div class="card-header">
                        <h2>4. Loading Indicator</h2>
                        <p class="text-sm text-gray-600 mt-1">Shows loading state during request</p>
                    </div>
                    <button hx-get="/demo/slow"
                            hx-target="#result-4"
                            hx-swap="innerHTML"
                            hx-indicator="#spinner-4"
                            class="btn-primary w-full mb-4">
                        Slow Request (2s)
                    </button>
                    <div id="spinner-4" class="htmx-indicator mb-4">
                        <div class="flex items-center justify-center p-4 bg-primary-50 rounded-lg">
                            <div class="animate-spin h-5 w-5 border-2 border-primary-500 border-t-transparent rounded-full mr-3"></div>
                            <span class="text-primary-700 font-semibold">Loading...</span>
                        </div>
                    </div>
                    <div id="result-4" class="min-h-[60px]">
                        <!-- Slow response will appear here -->
                    </div>
                </div>

                <!-- 5. Add/Delete Items -->
                <div class="card lg:col-span-2">
                    <div class="card-header">
                        <h2>5. Dynamic List (Add/Delete)</h2>
                        <p class="text-sm text-gray-600 mt-1">Add items and delete them individually</p>
                    </div>
                    <form hx-post="/demo/add-item"
                          hx-target="#item-list"
                          hx-swap="beforeend"
                          class="mb-4">
                        <div class="flex gap-3">
                            <input type="text"
                                   name="item"
                                   placeholder="Enter a habit idea..."
                                   required
                                   class="form-input flex-1">
                            <button type="submit" class="btn-success">
                                Add Item
                            </button>
                        </div>
                    </form>
                    <ul id="item-list" class="space-y-2">
                        <!-- Items will be added here -->
                    </ul>
                </div>

                <!-- 6. Search/Filter -->
                <div class="card lg:col-span-2">
                    <div class="card-header">
                        <h2>6. Live Search</h2>
                        <p class="text-sm text-gray-600 mt-1">Search habits as you type (with debounce)</p>
                    </div>
                    <input type="search"
                           name="query"
                           placeholder="Search habits..."
                           hx-get="/demo/search"
                           hx-trigger="keyup changed delay:500ms, search"
                           hx-target="#search-results"
                           hx-swap="innerHTML"
                           class="form-input mb-4">
                    <div id="search-results" class="border border-gray-200 rounded-lg overflow-hidden">
                        <div class="p-4 text-center text-gray-500">
                            <p>Type to search...</p>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Alpine.js Demo -->
            <div class="card mt-6">
                <div class="card-header">
                    <h2>7. Alpine.js Integration</h2>
                    <p class="text-sm text-gray-600 mt-1">Client-side interactivity without server requests</p>
                </div>
                <div x-data="{ open: false, count: 0 }" class="space-y-4">
                    <!-- Toggle Example -->
                    <div>
                        <button @click="open = !open" class="btn-secondary">
                            <span x-text="open ? 'Hide' : 'Show'"></span> Content
                        </button>
                        <div x-show="open"
                             x-transition
                             class="mt-3 p-4 bg-gray-50 rounded-lg">
                            <p class="text-gray-700">This content is toggled with Alpine.js - no server request needed!</p>
                        </div>
                    </div>

                    <!-- Counter Example -->
                    <div class="flex items-center gap-4">
                        <button @click="count--" class="btn-secondary">-</button>
                        <div class="flex-1 text-center">
                            <p class="text-3xl font-bold text-primary-600" x-text="count"></p>
                            <p class="text-sm text-gray-500">Counter (client-side only)</p>
                        </div>
                        <button @click="count++" class="btn-primary">+</button>
                    </div>
                </div>
            </div>

            <!-- Documentation -->
            <div class="card mt-6 bg-primary-50 border-2 border-primary-200">
                <h3 class="font-bold text-primary-900 mb-3">ðŸ“š HTMX Attributes Reference</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                    <div>
                        <code class="text-primary-700 font-semibold">hx-get="/url"</code>
                        <p class="text-gray-700 mt-1">Issues a GET request to the URL</p>
                    </div>
                    <div>
                        <code class="text-primary-700 font-semibold">hx-post="/url"</code>
                        <p class="text-gray-700 mt-1">Issues a POST request to the URL</p>
                    </div>
                    <div>
                        <code class="text-primary-700 font-semibold">hx-target="#id"</code>
                        <p class="text-gray-700 mt-1">Element to update with response</p>
                    </div>
                    <div>
                        <code class="text-primary-700 font-semibold">hx-swap="innerHTML"</code>
                        <p class="text-gray-700 mt-1">How to swap content (innerHTML, outerHTML, beforeend, etc.)</p>
                    </div>
                    <div>
                        <code class="text-primary-700 font-semibold">hx-trigger="click"</code>
                        <p class="text-gray-700 mt-1">What event triggers the request</p>
                    </div>
                    <div>
                        <code class="text-primary-700 font-semibold">hx-indicator="#id"</code>
                        <p class="text-gray-700 mt-1">Element to show during request</p>
                    </div>
                </div>
            </div>

            <!-- Footer -->
            <div class="text-center mt-8 text-gray-600">
                <p class="text-sm">Epic 02: Frontend Foundation - PLAN91-021 âœ…</p>
                <p class="text-xs mt-1">HTMX v1.9.10 | Alpine.js v3.13.3</p>
            </div>

        </div>
    </div>

    <!-- Scripts at end of body for performance -->
    <script src="/js/htmx.min.js"></script>
    <script src="/js/alpine.min.js" defer></script>

    <!-- Custom HTMX configuration -->
    <script>
        // Global HTMX configuration
        document.body.addEventListener('htmx:configRequest', function(evt) {
            // Add any custom headers here if needed
        });

        // Log HTMX events for debugging (remove in production)
        document.body.addEventListener('htmx:afterSwap', function(evt) {
            console.log('HTMX content swapped:', evt.detail);
        });
    </script>
</body>
</html>
