# PLAN91-022: Create Base Thymeleaf Layout Template

**Epic**: 02 - Frontend Foundation
**Status**: ✅ Complete
**Priority**: High
**Effort**: Medium (2-3 hours)
**Assignee**: AI Agent

---

## Description

Create a base Thymeleaf layout template that provides a consistent structure for all pages in Plan 91. This template will include the HTML boilerplate, header, navigation placeholder, main content area, and footer.

---

## Context

Thymeleaf layout templates allow us to define a common page structure once and reuse it across all pages. Child templates can extend the base layout and only define their specific content, reducing duplication and ensuring consistency.

**Why a Base Layout?**
- Consistent structure across all pages
- Single place to update global elements (header, footer, navigation)
- Automatic inclusion of CSS/JS files
- Better maintainability
- DRY principle (Don't Repeat Yourself)

---

## Acceptance Criteria

### Must Have
- [ ] Base layout template created in `templates/layout/base.html`
- [ ] HTML5 boilerplate with proper meta tags
- [ ] Tailwind CSS and HTMX/Alpine.js included
- [ ] Header fragment with Plan 91 branding
- [ ] Footer fragment with copyright
- [ ] Main content area that child templates can fill
- [ ] Responsive design (mobile-first)
- [ ] Proper Thymeleaf layout dialect usage

### Should Have
- [ ] Page title customization from child templates
- [ ] Optional additional CSS/JS includes from child templates
- [ ] Meta description customization
- [ ] Favicon reference

### Nice to Have
- [ ] Flash message area for success/error notifications
- [ ] Breadcrumb placeholder
- [ ] Mobile menu toggle (even if nav is empty for now)

---

## Technical Design

### 1. Thymeleaf Layout Dialect

We'll use Thymeleaf's layout dialect for template inheritance:

**Base Layout** (`layout/base.html`):
```html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
    <title layout:title-pattern="$CONTENT_TITLE - $LAYOUT_TITLE">Plan 91</title>
    <!-- CSS/JS includes -->
</head>
<body>
    <header th:replace="~{fragments/header :: header}"></header>
    <main layout:fragment="content">
        <!-- Child content goes here -->
    </main>
    <footer th:replace="~{fragments/footer :: footer}"></footer>
</body>
</html>
```

**Child Template** (e.g., `dashboard.html`):
```html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/base}">
<head>
    <title>Dashboard</title>
</head>
<body>
    <div layout:fragment="content">
        <!-- Dashboard-specific content -->
    </div>
</body>
</html>
```

### 2. File Structure

```
src/main/resources/templates/
├── layout/
│   └── base.html           # Base layout template
├── fragments/
│   ├── header.html         # Header fragment
│   └── footer.html         # Footer fragment
└── pages/
    └── dashboard.html      # Example page using base layout
```

### 3. Base Layout Design

**Features:**
- Fixed header with Plan 91 branding
- Navigation placeholder (will be populated in PLAN91-023)
- Flexible main content area
- Sticky footer
- Responsive mobile menu button (functionality in next ticket)

**Color Scheme:**
- Header: Primary blue gradient
- Background: Light gray (#F9FAFB)
- Footer: Dark gray (#1F2937)

### 4. Header Fragment

```html
<header th:fragment="header" class="bg-gradient-to-r from-primary-600 to-primary-700 text-white shadow-lg">
    <div class="max-w-7xl mx-auto px-4 py-4 flex items-center justify-between">
        <!-- Logo/Brand -->
        <div class="flex items-center space-x-3">
            <div class="text-2xl font-bold">Plan 91</div>
            <span class="text-primary-200 text-sm hidden md:inline">Build Habits That Last</span>
        </div>

        <!-- Mobile Menu Button -->
        <button class="md:hidden">
            <svg><!-- Hamburger icon --></svg>
        </button>

        <!-- Desktop Nav Placeholder -->
        <nav class="hidden md:block">
            <!-- Will be populated in PLAN91-023 -->
        </nav>
    </div>
</header>
```

### 5. Footer Fragment

```html
<footer th:fragment="footer" class="bg-gray-800 text-gray-300 mt-auto">
    <div class="max-w-7xl mx-auto px-4 py-6">
        <div class="text-center text-sm">
            <p>&copy; 2026 Plan 91. All rights reserved.</p>
            <p class="text-gray-500 mt-1">Epic 02: Frontend Foundation</p>
        </div>
    </div>
</footer>
```

---

## Implementation Steps

1. **Add Thymeleaf Layout Dialect dependency**
   - Check if already in pom.xml (Spring Boot usually includes it)
   - If not, add `thymeleaf-layout-dialect` dependency

2. **Create directory structure**
   ```bash
   mkdir -p src/main/resources/templates/layout
   mkdir -p src/main/resources/templates/fragments
   mkdir -p src/main/resources/templates/pages
   ```

3. **Create base layout template**
   - Create `layout/base.html`
   - Include all standard HTML boilerplate
   - Add meta tags for responsive design
   - Include Tailwind CSS and HTMX/Alpine.js
   - Define content fragment

4. **Create header fragment**
   - Create `fragments/header.html`
   - Plan 91 logo/branding
   - Mobile menu button (placeholder)
   - Navigation placeholder

5. **Create footer fragment**
   - Create `fragments/footer.html`
   - Copyright notice
   - Links placeholder (Privacy, Terms, etc.)

6. **Create example page**
   - Create `pages/dashboard.html` using base layout
   - Demonstrate layout inheritance
   - Show how to customize title

7. **Create controller for example page**
   - Add route to serve dashboard page
   - Test that layout works

8. **Test responsive design**
   - Mobile view
   - Tablet view
   - Desktop view

---

## Testing

### Manual Testing
1. Start Spring Boot application
2. Navigate to dashboard page
3. Verify:
   - Header displays correctly
   - Footer displays correctly
   - Content area renders
   - Page title is correct
   - CSS/JS files load
   - Responsive on mobile/tablet/desktop
4. Inspect HTML to verify layout inheritance worked

### Browser Testing
- Chrome/Edge
- Firefox
- Safari (if available)
- Mobile browsers

---

## Definition of Done

- [ ] `layout/base.html` created with proper structure
- [ ] `fragments/header.html` created
- [ ] `fragments/footer.html` created
- [ ] `pages/dashboard.html` created as example
- [ ] Controller route added for dashboard
- [ ] Layout inheritance works correctly
- [ ] Page titles customize properly
- [ ] All CSS/JS files load
- [ ] Responsive design works on all screen sizes
- [ ] No console errors
- [ ] Code compiles with `mvn clean compile`
- [ ] EPIC.md updated
- [ ] CURRENT_WORK.md updated

---

## Related Files

**New Files**:
- `src/main/resources/templates/layout/base.html`
- `src/main/resources/templates/fragments/header.html`
- `src/main/resources/templates/fragments/footer.html`
- `src/main/resources/templates/pages/dashboard.html`
- `src/main/java/com/ctoblue/plan91/adapter/in/web/DashboardController.java`

**Modified Files**:
- `docs/CURRENT_WORK.md`
- `epics/02-frontend-foundation/EPIC.md`

---

## References

- [Thymeleaf Layout Dialect](https://github.com/ultraq/thymeleaf-layout-dialect)
- [Thymeleaf Documentation](https://www.thymeleaf.org/documentation.html)
- [Thymeleaf Fragments](https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#template-layout)

---

**Created**: 2026-01-31
**Estimated Time**: 2-3 hours
**Actual Time**: TBD
